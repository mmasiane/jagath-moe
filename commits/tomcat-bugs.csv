Commit	 Author	 Date	 Message	 Bug	 Test	 Review URL	 Git SVN ID
9a61f97d45636de0be8cd8b4c5289a4ed1e5bbd	Mark Thomas <markt@apache.org>	Thu Nov 5 21:06:00 2015 +0000	Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=58585 Fix security exceptions when starting with a security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@1712866 13f79535-47bb-0310-9956-ffa450edef68
e331815405615b1c729c7bdc9898cfed9ae14dc	Mark Thomas <markt@apache.org>	Thu Jul 30 14:12:17 2015 +0000	Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=58125 Avoid a possible ClassCircularityError when running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1693429 13f79535-47bb-0310-9956-ffa450edef68
2db186aff0fefdd235e71d9fc30a02281928a87	Mark Thomas <markt@apache.org>	Fri Jun 26 07:46:48 2015 +0000	Remove realm name and authentication type from security messages, this information is set up per module now Patch by fjodorver				https://svn.apache.org/repos/asf/tomcat/trunk@1687700 13f79535-47bb-0310-9956-ffa450edef68
9a6bd00a49a01711b3e47b8f45725b399b2ba0f	Mark Thomas <markt@apache.org>	Tue Jun 23 09:30:08 2015 +0000	Store JASPIC auth method in security message Patch by fjodorver				https://svn.apache.org/repos/asf/tomcat/trunk@1687005 13f79535-47bb-0310-9956-ffa450edef68
564fc963484ec2585ed48fc9b0c952d53fcc105	Mark Thomas <markt@apache.org>	Sat May 16 09:37:26 2015 +0000	set the headers rather than add them Add header names to the docs and make clear that any existing headers will be replaced. Add the filter tot he security howto				https://svn.apache.org/repos/asf/tomcat/trunk@1679716 13f79535-47bb-0310-9956-ffa450edef68
1fa48f0eb411c39e6873705c5ff9bf2723fb266	Mark Thomas <markt@apache.org>	Tue Apr 28 21:28:26 2015 +0000	Use a new object every time for security. Review by schultz.				https://svn.apache.org/repos/asf/tomcat/trunk@1676634 13f79535-47bb-0310-9956-ffa450edef68
9e8ce05676a34773a60f7e61d321c85f2e9cdbd	Mark Thomas <markt@apache.org>	Thu Dec 18 13:01:41 2014 +0000	Servlet API requires java.security.cert.X509Certificate[] so be explicit about this in the support class.				https://svn.apache.org/repos/asf/tomcat/trunk@1646449 13f79535-47bb-0310-9956-ffa450edef68
19985fbf7995521acb1477877fee41d9a54a295	Mark Thomas <markt@apache.org>	Tue Dec 9 10:29:51 2014 +0000	Fix potential issue with BeanELresolver when running under a security manager. Some classes may not be accessible but may have accessible interfaces.				https://svn.apache.org/repos/asf/tomcat/trunk@1644017 13f79535-47bb-0310-9956-ffa450edef68
3750df7b408527ba1718f1d175d6abf40024353	Mark Thomas <markt@apache.org>	Fri Dec 5 13:58:58 2014 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=57281 Use interfaces rather than implementations to call Filter and Servlet methods when running under a security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@1643283 13f79535-47bb-0310-9956-ffa450edef68
34c8c7eec93512d061366e0d7b3c11c4db723ad	Konstantin Kolinko <kkolinko@apache.org>	Tue Oct 21 11:35:35 2014 +0000	Update changelog for BZ 47919 per r1630407 It logs not just key env vars, but all of them, and logs command line arguments. I am emphasizing CATALINA_OPTS, JAVA_OPTS, as that may be a security concern for somebody.				https://svn.apache.org/repos/asf/tomcat/trunk@1633346 13f79535-47bb-0310-9956-ffa450edef68
9b3a857e1264dfbee1842ed9903782522c78efe	Mark Emlyn David Thomas <markt@apache.org>	Tue Sep 30 20:10:18 2014 +0000	Update docs as automatically setting the system property javax.security.auth.useSubjectCredsOnly was removed since it broke SPNEGO on IBM JREs.				https://svn.apache.org/repos/asf/tomcat/trunk@1628541 13f79535-47bb-0310-9956-ffa450edef68
2b8e9d3607dadb54c2fffd425a1cb081dfccc59	Mark Emlyn David Thomas <markt@apache.org>	Tue Sep 9 08:22:28 2014 +0000	Move MessageDigest utility classes from o.a.catalina.util to o.a.tomcat.util.security so they are more widely available.				https://svn.apache.org/repos/asf/tomcat/trunk@1623685 13f79535-47bb-0310-9956-ffa450edef68
c6c27f99e543ee7a2ab4f9b4f1763ba8df1406f	Mark Emlyn David Thomas <markt@apache.org>	Fri Aug 15 12:54:37 2014 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56857 Fix thread safety issue when calling ServletContext methods while running under a security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@1618169 13f79535-47bb-0310-9956-ffa450edef68
88e75305e198f500ffd626a5b1275dc3ad46553	Mark Emlyn David Thomas <markt@apache.org>	Mon Jun 16 09:52:49 2014 +0000	Attempt to obfuscate session cookie values associated with other web applications when viewing HTTP request headers with the Request Header example from the examples web application. This reduces the opportunity to use this example for malicious purposes should the advice to remove the examples web application from security sensitive systems be ignored.				https://svn.apache.org/repos/asf/tomcat/trunk@1602831 13f79535-47bb-0310-9956-ffa450edef68
069009815608ea4867bdf12428384a2f71d0bf9	Mark Emlyn David Thomas <markt@apache.org>	Fri Jun 13 21:04:05 2014 +0000	Set the path for cookies created by the examples web app This reduces the opportunity for using such cookies for malicious purposes should the advice to remove the examples web application from security sensitive systems be ignored.				https://svn.apache.org/repos/asf/tomcat/trunk@1602521 13f79535-47bb-0310-9956-ffa450edef68
2126ac5db78cd582ff1c107f6e5f2fae309f236	Mark Emlyn David Thomas <markt@apache.org>	Tue May 20 11:26:02 2014 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56545 Pre-load two more classes to avoid exceptions when running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1596201 13f79535-47bb-0310-9956-ffa450edef68
24d70d3421306c4a06b1d90645d06f3fc686863	Mark Emlyn David Thomas <markt@apache.org>	Tue May 20 08:49:35 2014 +0000	Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=56545 Pre-load an additional class if running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1596141 13f79535-47bb-0310-9956-ffa450edef68
f18751f30b34556f065c4f7ce61e98108a9ef46	Violeta Georgieva Georgieva <violetagg@apache.org>	Thu May 8 07:55:35 2014 +0000	'Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56383 Document ErrorReportValve''s new property ''showReport'' on the "security HowTO" page.'				https://svn.apache.org/repos/asf/tomcat/trunk@1593200 13f79535-47bb-0310-9956-ffa450edef68
d126eec714a30fc335c793d0b820810abc2e82a	Konstantin Kolinko <kkolinko@apache.org>	Sun Apr 27 18:43:58 2014 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56383 Document the new feature on the "security HowTO" page. Move error valve documentation lower in the valves list (access log valves and access control valves should be the first ones there).				https://svn.apache.org/repos/asf/tomcat/trunk@1590451 13f79535-47bb-0310-9956-ffa450edef68
e70ee6b8fe437a498a375215011056702b0c481	Mark Emlyn David Thomas <markt@apache.org>	Thu Apr 17 09:56:26 2014 +0000	Small optimisation. The resolver and the factory are only used when running under a security manager so only load them in this case. Also avoid a possible memory leak when creating these objects.				https://svn.apache.org/repos/asf/tomcat/trunk@1588193 13f79535-47bb-0310-9956-ffa450edef68
1c0827a50192a12843bddbaa0b62a348c5115c1	Konstantin Kolinko <kkolinko@apache.org>	Fri Feb 21 15:13:15 2014 +0000	Allow to limit JUnit test run to a number of selected test case methods. BUILDING.txt says that Ant 1.8.x is needed. If we require a later version of Ant, e.g. 1.9.3 due to javadoc task security fixes, then Ant 1.8.2 comment in BUILDING.txt can be removed.				https://svn.apache.org/repos/asf/tomcat/trunk@1570601 13f79535-47bb-0310-9956-ffa450edef68
b3934c8c6eb20039157b25da01bd8ab9906a614	Konstantin Kolinko <kkolinko@apache.org>	Fri Jan 24 19:53:00 2014 +0000	Remove svn:keywords property from catalina/(mapper|mbeans|realm|security|servlets|session)/** svn propdel svn:keywords --depth infinity				https://svn.apache.org/repos/asf/tomcat/trunk@1561135 13f79535-47bb-0310-9956-ffa450edef68
37b2168927ca530162b8ac876d103b627fea89c	Mark Emlyn David Thomas <markt@apache.org>	Fri Jan 10 16:34:46 2014 +0000	Follow up to r1557113 - fix failure when running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1557180 13f79535-47bb-0310-9956-ffa450edef68
e39008e220ffc3d39d3820601a2642445ce69b4	Mark Emlyn David Thomas <markt@apache.org>	Tue Dec 17 18:47:49 2013 +0000	Fix a reported issue when running under a security manager. Refactor to enable some basic unit testing to hopefully avoid some of these issues in future.				https://svn.apache.org/repos/asf/tomcat/trunk@1551652 13f79535-47bb-0310-9956-ffa450edef68
d10732ec868df4bd66b14a173d3f37a87c55917	Mark Emlyn David Thomas <markt@apache.org>	Mon Nov 25 14:06:06 2013 +0000	Prevent a web application from deploying if it contains a context.xml, deployXML is false and there is no explicit descriptor as the descriptor may contain necessary security information.				https://svn.apache.org/repos/asf/tomcat/trunk@1545288 13f79535-47bb-0310-9956-ffa450edef68
83d975c5873c327b20a68862216b8b55602cf7d	Mark Emlyn David Thomas <markt@apache.org>	Mon Nov 25 10:26:26 2013 +0000	When running under a security manager disabled deployXML by default.				https://svn.apache.org/repos/asf/tomcat/trunk@1545213 13f79535-47bb-0310-9956-ffa450edef68
7806aa373fb25c125036198d802d59936aef1b2	Mark Emlyn David Thomas <markt@apache.org>	Fri Nov 15 17:39:05 2013 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55778 Make value used for javax.security.sasl.qop with SPNEGO configurable.				https://svn.apache.org/repos/asf/tomcat/trunk@1542339 13f79535-47bb-0310-9956-ffa450edef68
fb7439a77a7e719df8203d826431c3d7ca3b537	Mark Emlyn David Thomas <markt@apache.org>	Mon Nov 11 11:25:50 2013 +0000	Add more detail to the security how-to				https://svn.apache.org/repos/asf/tomcat/trunk@1540670 13f79535-47bb-0310-9956-ffa450edef68
470216479bbfed93941a54768960198a0d01981	Mark Emlyn David Thomas <markt@apache.org>	Tue Oct 15 20:15:03 2013 +0000	Fix Servlet 3.1 non-blocking when running with a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1532511 13f79535-47bb-0310-9956-ffa450edef68
e819efa7810c5a8b4eb41ad615d9d2a0c45243b	Mark Emlyn David Thomas <markt@apache.org>	Tue Oct 15 20:00:14 2013 +0000	Fix WebSocket when running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1532506 13f79535-47bb-0310-9956-ffa450edef68
a5f2dec07dcb82b551b2eb39467b19298268376	Konstantin Preißer <kpreisser@apache.org>	Thu Sep 26 15:21:06 2013 +0000	Improve Snake Websocket example: - Fix invalid JSON syntax (Strings always need to be in double-quotes) - In JavaScript, use JSON.parse() instead of eval() to parse JSON strings, to avoid potential security problems.				https://svn.apache.org/repos/asf/tomcat/trunk@1526565 13f79535-47bb-0310-9956-ffa450edef68
b010025639a37c94160e01d2ccf971ee1cf0675	Mark Emlyn David Thomas <markt@apache.org>	Wed Sep 18 20:24:02 2013 +0000	Fix starting with a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1524557 13f79535-47bb-0310-9956-ffa450edef68
710b05e708361eb00e0abad11ecd801dbce1c28	Mark Emlyn David Thomas <markt@apache.org>	Wed Aug 7 09:16:31 2013 +0000	When using a security manager always use the same method inside the doPrivileged call as triggered the call. This fixes an startup failure when running 8.0.x under a security manager as it uses a listener that does not have a zero arg constructor.				https://svn.apache.org/repos/asf/tomcat/trunk@1511217 13f79535-47bb-0310-9956-ffa450edef68
682a4f48a62b007af3a709c9ee5b91a5aab1872	Mark Emlyn David Thomas <markt@apache.org>	Fri Jun 21 12:41:13 2013 +0000	Expand test cases for servlet security annotations to include deny uncovered http methods. Fix the failure identified by violetagg				https://svn.apache.org/repos/asf/tomcat/trunk@1495414 13f79535-47bb-0310-9956-ffa450edef68
c685a094147703b683092ce896d83014b4f4291	Mark Emlyn David Thomas <markt@apache.org>	Tue Jun 18 20:46:53 2013 +0000	Add tests for security constraint role combination				https://svn.apache.org/repos/asf/tomcat/trunk@1494295 13f79535-47bb-0310-9956-ffa450edef68
c0315befa173952427f6147bc701ef9271e82fc	Mark Emlyn David Thomas <markt@apache.org>	Fri Nov 16 19:35:42 2012 +0000	Fix some security exceptions when running with a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1410545 13f79535-47bb-0310-9956-ffa450edef68
d5a5411cf7c2a3bceb03adde0b40e715a9fcf02	Mark Emlyn David Thomas <markt@apache.org>	Fri Nov 16 16:56:47 2012 +0000	Make sure onComplete() works when running with a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1410466 13f79535-47bb-0310-9956-ffa450edef68
5d7a0fb011c606b6278954abb296d0c61af682e	Mark Emlyn David Thomas <markt@apache.org>	Thu Aug 30 22:55:20 2012 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53801 Overlapping URL patterns were sometimes merged incorrectly in security constraints leading to incorrect 401 responses. Note: it was possible for access to be denied when it should have been granted but it was not possible for access to be granted when it should have been denied.				https://svn.apache.org/repos/asf/tomcat/trunk@1379206 13f79535-47bb-0310-9956-ffa450edef68
0997627dee04638468c0802c8186b9f4e6fe00e	Mark Emlyn David Thomas <markt@apache.org>	Sun Jul 15 19:47:20 2012 +0000	Code clean-up for o.a.catalina.security - Add final prompted by UCDetector - Java 7 use of <>				https://svn.apache.org/repos/asf/tomcat/trunk@1361776 13f79535-47bb-0310-9956-ffa450edef68
12f112701e2cab17ea54d60db34e5521b1feb41	Mark Emlyn David Thomas <markt@apache.org>	Wed Jun 6 18:45:50 2012 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53368 Make WebSocket play nicely with a security manager (kkolinko)				https://svn.apache.org/repos/asf/tomcat/trunk@1347047 13f79535-47bb-0310-9956-ffa450edef68
a1123af7087019ad62de469ccfd00d198c4e892	Mark Emlyn David Thomas <markt@apache.org>	Wed Jun 6 18:29:53 2012 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53366 New http header parser needs to be pre-loaded when running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1347034 13f79535-47bb-0310-9956-ffa450edef68
d3b503517ab7fefa2d5350a5036918a7f01d85a	Mark Emlyn David Thomas <markt@apache.org>	Fri Jun 1 09:40:59 2012 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53285 Modify how the digester processes security-role-ref since link is optional and null parameters are not handled by IntrospectionUtils				https://svn.apache.org/repos/asf/tomcat/trunk@1345029 13f79535-47bb-0310-9956-ffa450edef68
8e1551284e76880cf16845efb241535d0ea825b	Mark Emlyn David Thomas <markt@apache.org>	Wed Oct 26 15:02:01 2011 +0000	Make configuration issues for security related valves and filters result in the failure of the valve or filter rather than just a warning message.				https://svn.apache.org/repos/asf/tomcat/trunk@1189256 13f79535-47bb-0310-9956-ffa450edef68
226e51e96b2d8aaed8b86490b6cafcc535a9ab0	Mark Emlyn David Thomas <markt@apache.org>	Thu Sep 22 11:21:08 2011 +0000	Fix running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@1174061 13f79535-47bb-0310-9956-ffa450edef68
e69497fa7b1444632c6dadb64a4a82e18478ee6	Mark Emlyn David Thomas <markt@apache.org>	Wed Jul 13 13:28:24 2011 +0000	When running under a security manager and using sendfile, validate sendfile attributes to prevent sendfile being used to bypass the security manager. Part of the fix for CVE-2011-2526				https://svn.apache.org/repos/asf/tomcat/trunk@1146005 13f79535-47bb-0310-9956-ffa450edef68
43ab2b2963b574723df87cf5fd89016d28806a0	Mark Emlyn David Thomas <markt@apache.org>	Thu Jul 7 20:53:51 2011 +0000	Use SecurityClassLoad to pre-load HexUtils to prevent a security exception				https://svn.apache.org/repos/asf/tomcat/trunk@1144031 13f79535-47bb-0310-9956-ffa450edef68
cc808304f4f6b352656b2d4eeb0441da4f46ec7	Mark Emlyn David Thomas <markt@apache.org>	Wed Jun 8 22:20:22 2011 +0000	Refactoring triggered security exception when running TCKs				https://svn.apache.org/repos/asf/tomcat/trunk@1133586 13f79535-47bb-0310-9956-ffa450edef68
5594914c87d13ac3f217b1aafc7f2eafacc3aee	Mark Emlyn David Thomas <markt@apache.org>	Thu May 5 12:38:44 2011 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50950 Correct possible NotSerializableException for an authenticated session when running with a security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@1099772 13f79535-47bb-0310-9956-ffa450edef68
5b144773b81f6cdac65bb1091a4436c81262677	Mark Emlyn David Thomas <markt@apache.org>	Wed Mar 9 15:00:07 2011 +0000	Fix TCK test failure under a security Manager				https://svn.apache.org/repos/asf/tomcat/trunk@1079822 13f79535-47bb-0310-9956-ffa450edef68
8f47110847ef6d3ec672ecbce313f45f5ba07f4	Mark Emlyn David Thomas <markt@apache.org>	Wed Mar 9 11:38:38 2011 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50854 Add additional permissions required by the Manager application when running under a security Manager and support a shared Manager installation when $CATALINA_HOME != CATALINA_BASE.				https://svn.apache.org/repos/asf/tomcat/trunk@1079755 13f79535-47bb-0310-9956-ffa450edef68
ff4905158b77787a7f3aca55c9dec93456665dc	Mark Emlyn David Thomas <markt@apache.org>	Wed Mar 9 11:16:48 2011 +0000	CVE-2011-1088				
the fix for this issue. The optimisation not to configure an authenticator of there were no security constraints meant that in that case @ServletSecurity annotations had no effect. The unit tests did not pick this up since they added an authenticator directly.			Add an explicit unit test for this scenario.				https://svn.apache.org/repos/asf/tomcat/trunk@1079752 13f79535-47bb-0310-9956-ffa450edef68
fc86a014d4560fcc803f9533f08b0af93fc7deb	Mark Emlyn David Thomas <markt@apache.org>	Wed Feb 23 19:25:17 2011 +0000	Add security listener				https://svn.apache.org/repos/asf/tomcat/trunk@1073893 13f79535-47bb-0310-9956-ffa450edef68
15b6c9501c8a35895c3c4d3acf5fd0aa5bc339a	Mark Emlyn David Thomas <markt@apache.org>	Fri Feb 4 11:07:18 2011 +0000	Fix security exception when running under a SecurityManager				https://svn.apache.org/repos/asf/tomcat/trunk@1067147 13f79535-47bb-0310-9956-ffa450edef68
b768c0f232decbf85017b1110c05370290a73c7	Mark Emlyn David Thomas <markt@apache.org>	Mon Jan 17 17:31:45 2011 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50599 Use correct names of security roles for Manager app				https://svn.apache.org/repos/asf/tomcat/trunk@1060015 13f79535-47bb-0310-9956-ffa450edef68
ef5797dfa358d68a8a7ade8a672a38c4428a1c5	Mark Emlyn David Thomas <markt@apache.org>	Fri Jan 7 18:13:38 2011 +0000	Fix security exception when running Servlet TCK				https://svn.apache.org/repos/asf/tomcat/trunk@1056434 13f79535-47bb-0310-9956-ffa450edef68
2d19a9f06f4a3f16436dc3d8e034c62f8873970	Sylvain Laurent <slaurent@apache.org>	Fri Dec 3 22:19:11 2010 +0000		50282 : Load javax.security.auth.login.Configuration with JreMemoryLeakPreventionListener to avoid memory leak when stopping a webapp that would use JAAS.			https://svn.apache.org/repos/asf/tomcat/trunk@1042029 13f79535-47bb-0310-9956-ffa450edef68
075c4bb778f4514917caa0d9f1f225db8505652	Mark Emlyn David Thomas <markt@apache.org>	Fri Nov 12 18:29:12 2010 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50192 Improve performance for EL when running under a security manager. Based on a patch by Robert Goff.				https://svn.apache.org/repos/asf/tomcat/trunk@1034500 13f79535-47bb-0310-9956-ffa450edef68
898c50a126f18b8e8d2c83e8fb14e8d202bd20b	Konstantin Kolinko <kkolinko@apache.org>	Sun Oct 24 22:52:07 2010 +0000	Followup to r1026784 Print a stacktrace if an exception (e.g. IOException) happens when calling store.keys() and running under a security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@1026912 13f79535-47bb-0310-9956-ffa450edef68
1e513d5ff361f580767661ac0ee953c307ef8e7	Mark Emlyn David Thomas <markt@apache.org>	Fri Oct 8 13:22:04 2010 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50015 Re-factor dynamic servlet security implementation to make extensions, such as JACC implementations, simpler. Patch provided by David Jencks.				https://svn.apache.org/repos/asf/tomcat/trunk@1005811 13f79535-47bb-0310-9956-ffa450edef68
0d4c756f2656012fc0b8de3923d0978fea14c3e	Mark Emlyn David Thomas <markt@apache.org>	Mon Sep 27 23:06:08 2010 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49209 Prevent possible AccessControlException during undeployment when running with a security manager Patch provided by Sylvain Laurent				https://svn.apache.org/repos/asf/tomcat/trunk@1001955 13f79535-47bb-0310-9956-ffa450edef68
87b1a807129c2ab41623358281aa19ff2ff9950	Mark Emlyn David Thomas <markt@apache.org>	Mon Sep 27 12:13:32 2010 +0000	'Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49884 This required a major re-factoring of the async implementation. In summary: - Moved state management to the Coyote Processor - Added a SocketWrapper to the APR socket - Added syncs to ensure only one async state change at a time - Added syncs to ensure only one thread changing a socket''s state at a time A number of new bugs were also uncovered and fixed by this re-factoring: - delay processing complete() and dispatch() until request where startAsync() is called finished processing - onAsyncStart listener event Currently the test case for bug 49884 passes with the security manager enabled using "ab -n 5000 -c 150 -k ..." (it broke with "ab -n 50 -c 10 ..." previously) The unit tests pass for all three HTTP connectors. The AJP connectors have only been modified to ensure the code compiles. The following work remains: - Testing all connectors (HTTP and AJP) with TCK + security manager and fixing whatever is broken - Further clean-up - There is further scope for reducing code duplication between the connectors / aligning the code so it is easier to maintain.'				https://svn.apache.org/repos/asf/tomcat/trunk@1001698 13f79535-47bb-0310-9956-ffa450edef68
07f77876cb106572212f0de27d64c891c7006ca	Mark Emlyn David Thomas <markt@apache.org>	Mon Aug 23 20:35:03 2010 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49669 Another Java class triggering a memory leak. This time javax.security.auth.Policy				https://svn.apache.org/repos/asf/tomcat/trunk@988296 13f79535-47bb-0310-9956-ffa450edef68
1b97ef87deb717eb946ce10d5d8914d3207b515	Mark Emlyn David Thomas <markt@apache.org>	Mon Aug 2 10:49:06 2010 +0000	Fix running with a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@981448 13f79535-47bb-0310-9956-ffa450edef68
7bef46b54269a8daaee18bf096fe73c345774e9	Mark Emlyn David Thomas <markt@apache.org>	Thu Jul 1 09:57:07 2010 +0000	Improve default security settings. Enable the LockOutRealm by default.				https://svn.apache.org/repos/asf/tomcat/trunk@959580 13f79535-47bb-0310-9956-ffa450edef68
50eff514eed9876d67e142c91086b9db2dbbc27	Konstantin Kolinko <kkolinko@apache.org>	Sat Jun 5 00:19:07 2010 +0000	Wrap long lines, so that this file could be copied to security-manager-howto.xml as is.				https://svn.apache.org/repos/asf/tomcat/trunk@951620 13f79535-47bb-0310-9956-ffa450edef68
1d81ca3b5133fcf05988cc2d0fe3d91ebe14311	Mark Emlyn David Thomas <markt@apache.org>	Thu Jun 3 07:56:23 2010 +0000	Clean up FastHttpDateFormat initialisation when using a security manager as prompted by Konstantin				https://svn.apache.org/repos/asf/tomcat/trunk@950905 13f79535-47bb-0310-9956-ffa450edef68
8b460726d9739a6a2a1d006d35e0ec5338cc244	Mark Emlyn David Thomas <markt@apache.org>	Mon May 24 17:03:37 2010 +0000	Fix some TCK failures with the BIO AJP connector when using a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@947717 13f79535-47bb-0310-9956-ffa450edef68
f18a292e9d187ab60cff1b997dfe93e916cd31f	Mark Emlyn David Thomas <markt@apache.org>	Fri May 14 23:43:51 2010 +0000	TCK failures: Fix remaining failures with APR/native and a security Manager				https://svn.apache.org/repos/asf/tomcat/trunk@944518 13f79535-47bb-0310-9956-ffa450edef68
6e3ae58cb4da887a8c5482497072fa10ad9a60c	Filip Hanik <fhanik@apache.org>	Thu Apr 29 22:00:17 2010 +0000	Per documentation: http://java.sun.com/javase/6/docs/api/javax/security/auth/Subject.html Therefore all concrete Principal implementations associated with Subjects must implement Serializable.				https://svn.apache.org/repos/asf/tomcat/trunk@939491 13f79535-47bb-0310-9956-ffa450edef68
3d0ffaa687182dfcbd0299880af543f9da96450	Mark Emlyn David Thomas <markt@apache.org>	Sun Apr 11 22:43:09 2010 +0000	TCK failures: EL TCK with security manager				https://svn.apache.org/repos/asf/tomcat/trunk@933007 13f79535-47bb-0310-9956-ffa450edef68
6bb7c8354609b6b757bea0f104be6ceda254a1d	Rainer Jung <rjung@apache.org>	Sun Apr 11 18:26:20 2010 +0000	Reduce failures of new API when running under security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@932969 13f79535-47bb-0310-9956-ffa450edef68
02aab982bd98ebce522bb73fe5414ebca705a36	Rainer Jung <rjung@apache.org>	Sun Apr 11 17:47:00 2010 +0000	Allow JioEndpoint to switch context class loader under security manager. Code copied from standard session. Add two more classes to class pre-loading to improve security manager interoperability.				https://svn.apache.org/repos/asf/tomcat/trunk@932953 13f79535-47bb-0310-9956-ffa450edef68
848f504dcbb3ec53df4e2533a2657b355dbeb50	Rainer Jung <rjung@apache.org>	Sun Apr 11 01:26:43 2010 +0000	Add another property access to our security policy.				https://svn.apache.org/repos/asf/tomcat/trunk@932823 13f79535-47bb-0310-9956-ffa450edef68
28deefeffafd6ad629effb577e065983c5f5d8b	Rainer Jung <rjung@apache.org>	Sun Apr 11 01:08:09 2010 +0000	Add permission to read the STRICT_SERVLET_COMPLIANCE property to our default policy for the security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@932822 13f79535-47bb-0310-9956-ffa450edef68
6ef910b645485beba798206c223bb4421516bf8	Mark Emlyn David Thomas <markt@apache.org>	Sat Apr 10 15:53:14 2010 +0000	TCK failure (with security manager): Preload required class.				https://svn.apache.org/repos/asf/tomcat/trunk@932751 13f79535-47bb-0310-9956-ffa450edef68
8c8750f39ec9927aab36a05a6093dc890439dec	Mark Emlyn David Thomas <markt@apache.org>	Mon Mar 22 21:00:24 2010 +0000	Provide the method expected by the digester for adding security-role-ref elements				https://svn.apache.org/repos/asf/tomcat/trunk@926332 13f79535-47bb-0310-9956-ffa450edef68
f80ddaa399729c2c76072e2ad10d848110c67a5	Mark Emlyn David Thomas <markt@apache.org>	Thu Feb 11 12:23:36 2010 +0000	This is no longer security related as unsafe usage is blocked				https://svn.apache.org/repos/asf/tomcat/trunk@908942 13f79535-47bb-0310-9956-ffa450edef68
f05c25164b05b5735f26ce53fc5c9b93656335c	Mark Emlyn David Thomas <markt@apache.org>	Thu Jan 14 21:33:58 2010 +0000	Fix TCK failures with security manager due to fix for bug 47774				https://svn.apache.org/repos/asf/tomcat/trunk@899420 13f79535-47bb-0310-9956-ffa450edef68
1d5511dd33f82075207de11515235825544add8	Mark Emlyn David Thomas <markt@apache.org>	Mon Dec 14 14:53:00 2009 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47744 Prevent medium term memory leak when ussing SSL with a security manager Based on a patch by Greg Vanore				https://svn.apache.org/repos/asf/tomcat/trunk@890350 13f79535-47bb-0310-9956-ffa450edef68
f6feed1d22f68c63fd81206441bd11b09ccc9cd	Mark Emlyn David Thomas <markt@apache.org>	Mon Dec 14 14:51:12 2009 +0000	Pre-load a class required for apps to obtain the SSL key size when running under a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@890349 13f79535-47bb-0310-9956-ffa450edef68
cb92e016ed9eabbe5456ef8d78f2ba1d2c70fc2	Konstantin Kolinko <kkolinko@apache.org>	Wed Nov 18 03:00:57 2009 +0000	Wrapped long lines. As the text of this file is copy-pasted into security-manager-howto.html, it will make it more readable. Added a comment regarding tomcat-juli.jar				https://svn.apache.org/repos/asf/tomcat/trunk@881654 13f79535-47bb-0310-9956-ffa450edef68
99ee02b332b7b0499ab79bc2acd2a434c325ceb	Mark Emlyn David Thomas <markt@apache.org>	Fri Nov 6 18:26:39 2009 +0000					
'dn''t work at all under a security manger. Need to allow web apps access to the comet interfaces so move those interfaces to a separate package so we can grant access.'							https://svn.apache.org/repos/asf/tomcat/trunk@833510 13f79535-47bb-0310-9956-ffa450edef68
bf9abbb1c2f6824d076003d0f8720ce20db9f4b	Mark Emlyn David Thomas <markt@apache.org>	Sat Oct 3 16:20:49 2009 +0000	Fix BASE/HOME swap and add note re security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@821353 13f79535-47bb-0310-9956-ffa450edef68
19f64e23ab64e3cb4cb5473a0feafeaf4c37e8b	Mark Emlyn David Thomas <markt@apache.org>	Mon Sep 21 22:31:47 2009 +0000	Separate out Manager app roles Move /manager to /manager/text to simplify permissions Allows the future addition of extra security measures to one interface that might not make sense for another (usually these will be added to the HTML interface but that might not always be the case).				https://svn.apache.org/repos/asf/tomcat/trunk@817446 13f79535-47bb-0310-9956-ffa450edef68
f71be5c4165d4c79ca8af5e531dc44d9689e95c	Mark Emlyn David Thomas <markt@apache.org>	Tue Sep 8 10:24:29 2009 +0000	'Make the JDBC leak prevention play nicely with a security manager Don''t use a fixed size buffer to load the class.'				https://svn.apache.org/repos/asf/tomcat/trunk@812432 13f79535-47bb-0310-9956-ffa450edef68
9f6ed4b410807d57531ee170c37c0fe8914357c	Mark Emlyn David Thomas <markt@apache.org>	Sat Jun 13 19:19:18 2009 +0000	Remove case insensitivity option. It was a workaround for a change in Tomcat 3 and has security implications if used on case insensitive file systems.				https://svn.apache.org/repos/asf/tomcat/trunk@784455 13f79535-47bb-0310-9956-ffa450edef68
ab7c49a8e06defd61a0248602374c6ac90ba58a	Mladen Turk <mturk@apache.org>	Wed May 27 08:19:13 2009 +0000	Fix bz41564 by adding /user option to service.bat which respawns the service.bat using runas command. This pops-up a new window with elevated security on Vista+				https://svn.apache.org/repos/asf/tomcat/trunk@779047 13f79535-47bb-0310-9956-ffa450edef68
08407e60426ce9935596caed54fb221f1dc1a79	Mark Emlyn David Thomas <markt@apache.org>	Wed Apr 8 17:15:16 2009 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46509 Use correct link on error page in JSP security example Patch provided by Michael Moody				https://svn.apache.org/repos/asf/tomcat/trunk@763325 13f79535-47bb-0310-9956-ffa450edef68
43aa86a06ea538f2988f8cc15f861593474b37b	Mark Emlyn David Thomas <markt@apache.org>	Wed Apr 8 12:59:21 2009 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46967 and make behaviour consistent when running under a security manager. Based on a patch provided by Kirk Wolf				https://svn.apache.org/repos/asf/tomcat/trunk@763228 13f79535-47bb-0310-9956-ffa450edef68
249eaef2929f4805c1db0543f4ab431bfeffa42	Mark Emlyn David Thomas <markt@apache.org>	Sat Feb 21 00:44:33 2009 +0000	'Address Bill''s security concerns in previous patch to get TCK to pass under a security manager. TCK passes after this patch with and without security manager.'				https://svn.apache.org/repos/asf/tomcat/trunk@746425 13f79535-47bb-0310-9956-ffa450edef68
1cc509f2bd3d968c894826393656d830bcdc48c	Mark Emlyn David Thomas <markt@apache.org>	Fri Dec 26 19:25:01 2008 +0000	o.a.c.security generics changes				https://svn.apache.org/repos/asf/tomcat/trunk@729527 13f79535-47bb-0310-9956-ffa450edef68
addf017e186c4a49199fff6a92a3a7161759b2e	Mark Emlyn David Thomas <markt@apache.org>	Sun Nov 30 20:14:59 2008 +0000	Allow webapps to access org.apache.jasper.el package. I have looked through the package and I believe this change is safe although more eyes would be good. Without this permission, a handful of TCKs fail if tested with a security manager enabled.				https://svn.apache.org/repos/asf/tomcat/trunk@721886 13f79535-47bb-0310-9956-ffa450edef68
748e8978d91a4206447a20bf286b9a53e70cfaa	Mark Emlyn David Thomas <markt@apache.org>	Sat Nov 29 20:20:06 2008 +0000	Lots of EL failures with a security manager without this.				https://svn.apache.org/repos/asf/tomcat/trunk@721708 13f79535-47bb-0310-9956-ffa450edef68
9fa038cff2fb67030f9afbb9d2832b1c5e4b26b	Mark Emlyn David Thomas <markt@apache.org>	Sat Nov 29 19:01:57 2008 +0000	Fix some TCK failures when using a security manager.				https://svn.apache.org/repos/asf/tomcat/trunk@721704 13f79535-47bb-0310-9956-ffa450edef68
e8bf856d29aa52ef4739f71872b1a432267d83a	Mark Emlyn David Thomas <markt@apache.org>	Thu Nov 27 21:40:05 2008 +0000	Add doPrivileged block required for Servlet TCK to pass when running with a security manager				https://svn.apache.org/repos/asf/tomcat/trunk@721286 13f79535-47bb-0310-9956-ffa450edef68
18951ee1294d434da86bc778e039e97319e60e1	Mark Emlyn David Thomas <markt@apache.org>	Mon Nov 3 21:52:42 2008 +0000	Remove the invoker servlet and all references for security reasons. This will not be proposed for backport to 6.0.x				https://svn.apache.org/repos/asf/tomcat/trunk@710179 13f79535-47bb-0310-9956-ffa450edef68
28c03bd89e4603cf726a67881f5da81617013c9	Mark Emlyn David Thomas <markt@apache.org>	Mon Oct 27 17:28:16 2008 +0000	Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46096 Allow for running under a security manager when processing annotations.				https://svn.apache.org/repos/asf/tomcat/trunk@708243 13f79535-47bb-0310-9956-ffa450edef68
beabcd929cce72c0328c90369402e181af62a8c	Rainer Jung <rjung@apache.org>	Fri Sep 19 19:51:59 2008 +0000	Add an optional and configurable default role to the JNDIRealm. This comes handy, if you only want to authenticate the users, but have a security constraint with a role in the app.				https://svn.apache.org/repos/asf/tomcat/trunk@697213 13f79535-47bb-0310-9956-ffa450edef68
e51e49fe13fb8fe5ec5cf857db218aabf989951	Mark Emlyn David Thomas <markt@apache.org>	Thu Jul 10 23:00:31 2008 +0000	Startup fails with security enabled				https://svn.apache.org/repos/asf/tomcat/trunk@675796 13f79535-47bb-0310-9956-ffa450edef68
27696ebfb81b49a56e51624cff10bef38c8bdb3	Mark Emlyn David Thomas <markt@apache.org>	Sun Oct 21 03:10:38 2007 +0000	Add improved fix for webdav vulnerability				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@586837 13f79535-47bb-0310-9956-ffa450edef68
d1c3c311a784f1f26fe8a3dd4974f82f53b8026	Mark Emlyn David Thomas <markt@apache.org>	Mon Oct 15 12:32:41 2007 +0000	Propose fix for webdav vulnerability Vote on the patches I could review quickly				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@584771 13f79535-47bb-0310-9956-ffa450edef68
b17e7e20209187fc4f56bad99e95f2d764cc000	Mark Emlyn David Thomas <markt@apache.org>	Mon Jul 30 23:48:45 2007 +0000	Fix bug 42979. Update sample.war to include recent security fixes. Ported from TC5.				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@561188 13f79535-47bb-0310-9956-ffa450edef68
d6f5508267bfa8dccc05f1395c3375d34c3232d	Remy Maucherat <remm@apache.org>	Fri Jun 29 12:35:04 2007 +0000	- Fix a lost reference problem when using Comet with a security manager.				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@551870 13f79535-47bb-0310-9956-ffa450edef68
2c47be25fe7abd6f712b819e2f8416f873e07b1	Remy Maucherat <remm@apache.org>	Fri Mar 30 14:38:02 2007 +0000	- Adjustments to error processing with Comet during the begin event (exceptions not causing error reports). - Fix a probable bug when security was enabled (Comet would most likely not work).				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@524103 13f79535-47bb-0310-9956-ffa450edef68
bfe39dce70949f609f8173194fab9ea52ca2c5b	Remy Maucherat <remm@apache.org>	Sat Feb 10 00:54:56 2007 +0000	- Set of minor optimizations. - Unify usage of the security manager flag. - Submitted by Arvind Srinivasan.				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@505593 13f79535-47bb-0310-9956-ffa450edef68
734c80789a3ff314ff02701f59003259b7a2cc5	Remy Maucherat <remm@apache.org>	Fri Nov 3 10:56:25 2006 +0000	- Remove an extra throwable. - Add a specific flag for recycling facades (when security is on, recycling will always be done, obviously).				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@470756 13f79535-47bb-0310-9956-ffa450edef68
74ec61724b26e610b8727603473d3c23ce4d474	Remy Maucherat <remm@apache.org>	Fri Jul 7 22:35:25 2006 +0000	- If there is a security manager, the map should be reset (otherwise, references could be kept).				https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@420002 13f79535-47bb-0310-9956-ffa450edef68
